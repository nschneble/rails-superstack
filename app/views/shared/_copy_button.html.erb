<%
  button_classes ||= "relative inline-flex items-center gap-1 text-xs text-slate-600 hover:text-slate-900 cursor-pointer"
  icon_classes   ||= "fa-solid fa-copy transition-opacity duration-100"
  duration       ||= 1000
  label          ||= nil
%>

<button type="button" data-controller="clipboard" data-action="click->clipboard#copy" data-clipboard-duration-value="<%= duration %>"
  <% if local_assigns.key?(:text) && text.present? %>
    data-clipboard-text-value="<%= text %>"
  <% end %>
  <% if local_assigns.key?(:target) && target.present? %>
    data-clipboard-target-selector-value="<%= target %>"
  <% end %>
  <% unless font_awesome_available? %>
    data-clipboard-emoji-fallback-value="true"
  <% end %>
  class="<%= button_classes %>"
>
  <% if font_awesome_available? %>
    <i class="<%= icon_classes %>" data-clipboard-target="icon"></i>
  <% else %>
    <span class="transition-opacity duration-100" data-clipboard-target="icon">ðŸ“‹</span>
  <% end %>

  <% if label.present? %>
    <span class="ml-1"><%= label %></span>
  <% end %>

  <span class="absolute -top-8 left-1/2 -translate-x-1/2 z-10 bg-slate-800 text-white text-xs rounded px-2 py-1 whitespace-nowrap pointer-events-none opacity-0 translate-y-1 shadow-lg transition-all duration-200" data-clipboard-target="tooltip">
    Copied!
    <span class="absolute left-1/2 top-full -translate-x-1/2 -mt-1 w-2 h-2 bg-slate-800 rotate-45 shadow-lg" aria-hidden="true"></span>
  </span>
</button>
